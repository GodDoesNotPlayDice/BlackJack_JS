(()=>{let e=document.querySelector("#new_game"),s=document.querySelector("#to_hit"),t=document.querySelector("#to_stand"),i=document.querySelector("#total_cards"),a=document.querySelector("#player_cards"),r=document.querySelector("#player_pts"),l=document.querySelector("#bot_pts"),d=document.querySelector("#bot_cards"),c=document.querySelector("#win"),o=document.querySelector("#lose"),n=document.querySelector("#push");Swal.fire("How to play?","The goal of blackjack is to beat the dealer's hand without going over 21. Face cards are worth 10. Aces are worth 1 or 11, whichever makes a better hand. Each player starts with two cards, one of the dealer's cards is hidden until the end. For start the game, click on the button \"New Game\".","question");let $=[],p=[],h=[],L=0,f=[],y=[],m=0,u=!1,b=!1,v=()=>{let e=["C","D","H","S"],s=["A","J","Q","K"],t=[];for(let i=2;i<=10;i++)for(let a of e)t.push(i+a);for(let r of e)for(let l of s)t.push(l+r);return _.shuffle(t)},g=e=>{if(0===e.length)throw"Here is no cards in the deck";let s=e[Math.floor(Math.random()*e.length)];return e.splice(e.indexOf(s),1),i.innerText=e.length,s},w=(e,s)=>{let t=parseInt(e);return isNaN(t)&&(e=e.substring(0,1),t="A"===t?s+11<21?11:1:10),t},k=(e,s,t)=>{for(let i of e=e.sort()){if(21===s)break;if("A"===e[0].substring(0,1)&&"A"===e[1].substring(0,1)){s=12;break}let a=i.substring(0,1);if("A"===a)for(let r of e){let l=r.substring(0,1);if(a!==l){if("K"===l||"Q"===l||"J"===l){s=21;break}s+=w(a,s)}}else s+=w(i,s)}return s},q=()=>{for(;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)d.removeChild(d.firstChild);$=v(),c.classList.contains("hidden")||c.classList.add("hidden"),o.classList.contains("hidden")||o.classList.add("hidden"),n.classList.contains("hidden")||n.classList.add("hidden"),s.classList.contains("opacity-50")&&s.classList.replace("opacity-50","opacity-100"),t.classList.contains("opacity-50")&&t.classList.replace("opacity-50","opacity-100"),s.disabled=!1,t.disabled=!1,u=!1,p=[],f=[],L=0,m=0,l.innerText=0,h=[],y=[];for(let e=0;e<2;e++){card=g($);let w=document.createElement("img");for(let q of(w.setAttribute("src",`./cards/${card}.png`),p.push(card),w.classList.add("w-20","lg:w-28","relative","left-28","-ml-16"),h.push(w),h))a.append(q)}for(let S=0;S<2;S++){card=g($),f.push(card);let C=document.createElement("img");for(let E of(C.setAttribute("src","./back_cards/red_back.png"),C.classList.add("w-20","lg:w-28","relative","left-28","-ml-16"),y.push(C),f))d.append(C)}L=k(p,L,"Player"),(m=k(f,m,"Bot"))>=21&&(b=!0,l.innerText=21,o.classList.remove("hidden"),t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),s.disabled=!0,t.disabled=!0,A()),L>=21&&(u=!0,c.classList.remove("hidden"),t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),s.disabled=!0,t.disabled=!0,A()),r.innerText=L,i.innerText=$.length},S=e=>{if(e>18)!1!==u&&C(e);else{card=g($);let s=document.createElement("img");return s.setAttribute("src","./back_cards/red_back.png"),s.classList.add("w-20","lg:w-28","relative","left-28","-ml-16"),y.push(s),d.append(s),f.push(card),m+=w(card,m),e}},A=()=>{for(;d.firstChild;)d.removeChild(d.firstChild);for(card of f){let e=document.createElement("img");e.setAttribute("src",`./cards/${card}.png`),e.classList.add("w-20","lg:w-28","relative","left-28","-ml-16"),y.push(e),d.append(e)}l.innerText=m},C=e=>{if(e>19&&e<21)A();else{for(;e<18;)card=g($),f.push(card),m+=w(card,m),e=m;A()}};e.addEventListener("click",e=>{q()}),s.addEventListener("click",e=>{let i=document.createElement("img"),l=g($);if(i.setAttribute("src",`./cards/${l}.png`),i.classList.add("w-20","lg:w-28","relative","left-28","-ml-16"),h.push(i),L+=w(l,L),a.append(i),r.innerText=L,S(m),21===L){u=!0,c.classList.remove("hidden"),t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),s.disabled=!0,t.disabled=!0,C(m);return}if(m>21&&L>21){u=!0,n.classList.remove("hidden"),s.classList.replace("opacity-100","opacity-50"),s.disabled=!0,t.classList.replace("opacity-100","opacity-50"),t.disabled=!0,C(m);return}if(m===L){u=!0,n.classList.remove("hidden"),t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),s.disabled=!0,t.disabled=!0,C(m);return}if(L>21){u=!0,o.classList.remove("hidden"),t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),s.disabled=!0,t.disabled=!0,C(m);return}}),t.addEventListener("click",e=>{u=!0,t.classList.remove("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-50"),t.classList.add("opacity-50"),t.disabled=!0,s.disabled=!0,C(m),21===m&&o.classList.remove("hidden"),m>21&&c.classList.remove("hidden"),m<21&&m>L&&o.classList.remove("hidden"),m<21&&m<L&&c.classList.remove("hidden"),m<21&&m===L&&c.classList.remove("hidden"),m===L&&n.classList.remove("hidden")})})();